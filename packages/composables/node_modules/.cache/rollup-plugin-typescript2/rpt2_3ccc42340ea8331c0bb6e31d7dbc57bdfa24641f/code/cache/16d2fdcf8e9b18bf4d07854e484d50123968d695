{"code":"import { __awaiter, __generator } from \"tslib\";\r\nimport { useShippingProviderFactory } from '@vue-storefront/core';\r\nimport { useCart } from '../useCart';\r\nvar params = {\r\n    provide: function () {\r\n        return useCart();\r\n    },\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    load: function (context, _a) {\r\n        var customQuery = _a.customQuery;\r\n        return __awaiter(void 0, void 0, void 0, function () {\r\n            var shippingAddress, billingAddress, shippingRate, params_1, paymentMethodResults, paymentMethods;\r\n            var _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n            return __generator(this, function (_l) {\r\n                switch (_l.label) {\r\n                    case 0:\r\n                        console.log('Mocked: loadShippingProvider');\r\n                        if (!(customQuery.type === 'payment')) return [3 /*break*/, 2];\r\n                        shippingAddress = (_b = context === null || context === void 0 ? void 0 : context.cart.value) === null || _b === void 0 ? void 0 : _b.shippingAddress;\r\n                        billingAddress = (_c = context === null || context === void 0 ? void 0 : context.cart.value) === null || _c === void 0 ? void 0 : _c.billingAddress;\r\n                        shippingRate = (_d = context === null || context === void 0 ? void 0 : context.cart.value) === null || _d === void 0 ? void 0 : _d.selectedShippingRate;\r\n                        if (!(shippingAddress && billingAddress && shippingRate)) return [3 /*break*/, 2];\r\n                        params_1 = {\r\n                            shippingMethod: shippingRate.method\r\n                        };\r\n                        return [4 /*yield*/, context.$bagisto.api.saveShippingMethod(params_1)];\r\n                    case 1:\r\n                        paymentMethodResults = _l.sent();\r\n                        if ((_f = (_e = paymentMethodResults === null || paymentMethodResults === void 0 ? void 0 : paymentMethodResults.data) === null || _e === void 0 ? void 0 : _e.paymentMethods) === null || _f === void 0 ? void 0 : _f.cart) {\r\n                            context.setCart((_h = (_g = paymentMethodResults === null || paymentMethodResults === void 0 ? void 0 : paymentMethodResults.data) === null || _g === void 0 ? void 0 : _g.paymentMethods) === null || _h === void 0 ? void 0 : _h.cart);\r\n                        }\r\n                        paymentMethods = (_k = (_j = paymentMethodResults === null || paymentMethodResults === void 0 ? void 0 : paymentMethodResults.data) === null || _j === void 0 ? void 0 : _j.paymentMethods) === null || _k === void 0 ? void 0 : _k.paymentMethods;\r\n                        return [2 /*return*/, paymentMethods ? paymentMethods : null];\r\n                    case 2: return [2 /*return*/, null];\r\n                }\r\n            });\r\n        });\r\n    },\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    save: function (context, _a) {\r\n        var shippingMethod = _a.shippingMethod, customQuery = _a.customQuery;\r\n        return __awaiter(void 0, void 0, void 0, function () {\r\n            var params, shippingMethodResults, params_2, paymentMethodResults;\r\n            var _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;\r\n            return __generator(this, function (_o) {\r\n                switch (_o.label) {\r\n                    case 0:\r\n                        console.log('Mocked: saveShippingProvider');\r\n                        params = {\r\n                            shippingMethod: shippingMethod\r\n                        };\r\n                        if (!((customQuery === null || customQuery === void 0 ? void 0 : customQuery.actionType) && customQuery.actionType === 'shipping')) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, context.$bagisto.api.saveShippingMethod(params)];\r\n                    case 1:\r\n                        shippingMethodResults = _o.sent();\r\n                        if ((_c = (_b = shippingMethodResults === null || shippingMethodResults === void 0 ? void 0 : shippingMethodResults.data) === null || _b === void 0 ? void 0 : _b.paymentMethods) === null || _c === void 0 ? void 0 : _c.cart) {\r\n                            context.setCart((_e = (_d = shippingMethodResults === null || shippingMethodResults === void 0 ? void 0 : shippingMethodResults.data) === null || _d === void 0 ? void 0 : _d.paymentMethods) === null || _e === void 0 ? void 0 : _e.cart);\r\n                        }\r\n                        return [2 /*return*/, ((_g = (_f = shippingMethodResults === null || shippingMethodResults === void 0 ? void 0 : shippingMethodResults.data) === null || _f === void 0 ? void 0 : _f.paymentMethods) === null || _g === void 0 ? void 0 : _g.paymentMethods) || null];\r\n                    case 2:\r\n                        if (!((customQuery === null || customQuery === void 0 ? void 0 : customQuery.actionType) && customQuery.actionType === 'payment')) return [3 /*break*/, 4];\r\n                        params_2 = {\r\n                            payment: {\r\n                                method: shippingMethod\r\n                            }\r\n                        };\r\n                        return [4 /*yield*/, context.$bagisto.api.savePaymentMethod(params_2)];\r\n                    case 3:\r\n                        paymentMethodResults = _o.sent();\r\n                        if ((_j = (_h = paymentMethodResults === null || paymentMethodResults === void 0 ? void 0 : paymentMethodResults.data) === null || _h === void 0 ? void 0 : _h.savePayment) === null || _j === void 0 ? void 0 : _j.cart) {\r\n                            context.setCart((_l = (_k = paymentMethodResults === null || paymentMethodResults === void 0 ? void 0 : paymentMethodResults.data) === null || _k === void 0 ? void 0 : _k.savePayment) === null || _l === void 0 ? void 0 : _l.cart);\r\n                        }\r\n                        return [2 /*return*/, ((_m = paymentMethodResults === null || paymentMethodResults === void 0 ? void 0 : paymentMethodResults.data) === null || _m === void 0 ? void 0 : _m.savePayment) || null];\r\n                    case 4: return [2 /*return*/, null];\r\n                }\r\n            });\r\n        });\r\n    }\r\n};\r\nexport var useShippingProvider = useShippingProviderFactory(params);\r\n//# sourceMappingURL=index.js.map","references":["/home/ucodesoft/Desktop/Adiamor/bagisto_vuestore/vuestorefront/node_modules/@vue-storefront/core/lib/src/index.d.ts","/home/ucodesoft/Desktop/Adiamor/bagisto_vuestore/vuestorefront/node_modules/@vue-storefront/bagisto-api/lib/index.d.ts","/home/ucodesoft/Desktop/Adiamor/bagisto_vuestore/vuestorefront/packages/composables/src/useCart/index.ts"],"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/useShippingProvider/index.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/ucodesoft/Desktop/Adiamor/bagisto_vuestore/vuestorefront/packages/composables/node_modules/.cache/rollup-plugin-typescript2/placeholder/useShippingProvider/index.d.ts","writeByteOrderMark":false,"text":"import type { ShippingMethod } from '@vue-storefront/bagisto-api';\r\nexport declare const useShippingProvider: () => import(\"@vue-storefront/core\").UseShippingProvider<any, ShippingMethod, any>;\r\n"}}
