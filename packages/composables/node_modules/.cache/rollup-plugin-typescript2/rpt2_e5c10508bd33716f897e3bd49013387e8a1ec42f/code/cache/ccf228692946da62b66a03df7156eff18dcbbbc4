{"code":"import { __awaiter, __generator } from \"tslib\";\r\nimport { useUserFactory } from '@vue-storefront/core';\r\nimport { useCart } from '../useCart';\r\nvar params = {\r\n    provide: function () {\r\n        return {\r\n            cart: useCart()\r\n        };\r\n    },\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    load: function (context) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var customerToken, user_data, loginResult, customerDetail;\r\n        var _a;\r\n        return __generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0:\r\n                    console.log('Mocked: useUser.load');\r\n                    customerToken = context.$bagisto.config.app.$cookies.get('vsf-bagCust-token');\r\n                    user_data = context.$bagisto.config.app.$cookies.get('vsf-bagCust-user');\r\n                    console.log('hiihhihihiihihihih');\r\n                    console.log({ user_data: user_data }, 'USER_DATA_FROM_COOKIES');\r\n                    if (!customerToken) return [3 /*break*/, 2];\r\n                    return [4 /*yield*/, context.$bagisto.api.getCustomer(user_data)];\r\n                case 1:\r\n                    loginResult = _b.sent();\r\n                    customerDetail = (_a = loginResult === null || loginResult === void 0 ? void 0 : loginResult.data) === null || _a === void 0 ? void 0 : _a.user;\r\n                    return [2 /*return*/, customerDetail ? customerDetail : null];\r\n                case 2:\r\n                    context.cart.load();\r\n                    return [2 /*return*/, null];\r\n            }\r\n        });\r\n    }); },\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    logOut: function (context) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var token, logoutResult;\r\n        var _a, _b;\r\n        return __generator(this, function (_c) {\r\n            switch (_c.label) {\r\n                case 0:\r\n                    console.log('Mocked: useUser.logOut');\r\n                    token = context.$bagisto.config.app.$cookies.get('vsf-bagCust-token');\r\n                    return [4 /*yield*/, context.$bagisto.api.customerLogout()];\r\n                case 1:\r\n                    logoutResult = _c.sent();\r\n                    if (((_b = (_a = logoutResult === null || logoutResult === void 0 ? void 0 : logoutResult.data) === null || _a === void 0 ? void 0 : _a.customerLogout) === null || _b === void 0 ? void 0 : _b.status) && token) {\r\n                        context.$bagisto.config.app.$cookies.remove('vsf-bagCust-token');\r\n                        context === null || context === void 0 ? void 0 : context.cart.setCart(null);\r\n                    }\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    }); },\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    updateUser: function (context, _a) {\r\n        var currentUser = _a.currentUser, updatedUserData = _a.updatedUserData;\r\n        return __awaiter(void 0, void 0, void 0, function () {\r\n            var updateResult, userData;\r\n            var _b, _c;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0:\r\n                        console.log('Mocked: useUser.updateUser');\r\n                        return [4 /*yield*/, context.$bagisto.api.customerUpdate(updatedUserData)];\r\n                    case 1:\r\n                        updateResult = _d.sent();\r\n                        userData = (_c = (_b = updateResult === null || updateResult === void 0 ? void 0 : updateResult.data) === null || _b === void 0 ? void 0 : _b.updateAccount) === null || _c === void 0 ? void 0 : _c.customer;\r\n                        if (!userData) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, params.load(context)];\r\n                    case 2:\r\n                        _d.sent();\r\n                        _d.label = 3;\r\n                    case 3: return [2 /*return*/, userData ? userData : null];\r\n                }\r\n            });\r\n        });\r\n    },\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    register: function (context, params) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var registerResult;\r\n        var _a;\r\n        return __generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0:\r\n                    console.log('Mocked: useUser.register');\r\n                    return [4 /*yield*/, context.$bagisto.api.createCustomer(params)];\r\n                case 1:\r\n                    registerResult = _b.sent();\r\n                    return [2 /*return*/, {\r\n                            key: 'customer_register',\r\n                            // success: registerResult?.data?.customerRegister,\r\n                            success: (_a = registerResult === null || registerResult === void 0 ? void 0 : registerResult.data) === null || _a === void 0 ? void 0 : _a.createUser,\r\n                            error: registerResult.data ? null : registerResult\r\n                        }];\r\n            }\r\n        });\r\n    }); },\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    logIn: function (context, params) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var loginResult, loginResultResponse;\r\n        var _a, _b, _c, _d, _e, _f;\r\n        return __generator(this, function (_g) {\r\n            switch (_g.label) {\r\n                case 0:\r\n                    console.log('Mocked: useUser.logIn');\r\n                    return [4 /*yield*/, context.$bagisto.api.customerLogin(params)];\r\n                case 1:\r\n                    loginResult = _g.sent();\r\n                    loginResultResponse = {\r\n                        key: 'customer_login',\r\n                        customerToken: ((_b = (_a = loginResult === null || loginResult === void 0 ? void 0 : loginResult.data) === null || _a === void 0 ? void 0 : _a.userLogin) === null || _b === void 0 ? void 0 : _b.accessToken) || null,\r\n                        user: ((_d = (_c = loginResult === null || loginResult === void 0 ? void 0 : loginResult.data) === null || _c === void 0 ? void 0 : _c.userLogin) === null || _d === void 0 ? void 0 : _d.user) || null,\r\n                        success: (_f = (_e = loginResult === null || loginResult === void 0 ? void 0 : loginResult.data) === null || _e === void 0 ? void 0 : _e.userLogin) === null || _f === void 0 ? void 0 : _f.success,\r\n                        error: loginResult.data ? null : loginResult\r\n                    };\r\n                    if (loginResultResponse.customerToken !== null) {\r\n                        context.$bagisto.config.app.$cookies.set('vsf-bagCust-token', loginResultResponse.customerToken);\r\n                        // store id in cookies\r\n                        context.$bagisto.config.app.$cookies.set('vsf-bagCust-user', loginResultResponse.user);\r\n                        context === null || context === void 0 ? void 0 : context.cart.load();\r\n                    }\r\n                    return [2 /*return*/, loginResultResponse];\r\n            }\r\n        });\r\n    }); },\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    changePassword: function (context, _a) {\r\n        var currentUser = _a.currentUser, currentPassword = _a.currentPassword, newPassword = _a.newPassword;\r\n        return __awaiter(void 0, void 0, void 0, function () {\r\n            var params, updatePasswordResult;\r\n            var _b, _c;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0:\r\n                        console.log('Mocked: useUser.changePassword');\r\n                        params = {\r\n                            firstName: currentUser.firstName,\r\n                            lastName: currentUser.lastName,\r\n                            email: currentUser.email,\r\n                            gender: (currentUser === null || currentUser === void 0 ? void 0 : currentUser.gender) || 'Male',\r\n                            oldpassword: currentPassword,\r\n                            password: newPassword,\r\n                            confirmPassword: newPassword\r\n                        };\r\n                        return [4 /*yield*/, context.$bagisto.api.customerUpdate(params)];\r\n                    case 1:\r\n                        updatePasswordResult = _d.sent();\r\n                        return [2 /*return*/, ((_c = (_b = updatePasswordResult === null || updatePasswordResult === void 0 ? void 0 : updatePasswordResult.data) === null || _b === void 0 ? void 0 : _b.updateAccount) === null || _c === void 0 ? void 0 : _c.customer) || null];\r\n                }\r\n            });\r\n        });\r\n    }\r\n};\r\nexport var useUser = useUserFactory(params);\r\n//# sourceMappingURL=index.js.map","references":["/home/ucodesoft/Desktop/Adiamor/bagisto_vuestore/vuestorefront/node_modules/@vue-storefront/core/lib/src/index.d.ts","/home/ucodesoft/Desktop/Adiamor/bagisto_vuestore/vuestorefront/node_modules/@vue-storefront/bagisto-api/lib/index.d.ts","/home/ucodesoft/Desktop/Adiamor/bagisto_vuestore/vuestorefront/packages/composables/src/types.ts","/home/ucodesoft/Desktop/Adiamor/bagisto_vuestore/vuestorefront/packages/composables/src/useCart/index.ts"],"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/useUser/index.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/ucodesoft/Desktop/Adiamor/bagisto_vuestore/vuestorefront/packages/composables/node_modules/.cache/rollup-plugin-typescript2/placeholder/useUser/index.d.ts","writeByteOrderMark":false,"text":"import type { User } from '@vue-storefront/bagisto-api';\r\nexport declare const useUser: () => import(\"@vue-storefront/core\").UseUser<User, any, any>;\r\n"}}
